````md
# ğŸ” MERN AuthSecure (Reusable Auth + Admin Dashboard)

A modern **full-stack MERN authentication system** with **Admin Dashboard**, built for reusable production-ready login systems.  
Includes **JWT auth, OAuth (Google/GitHub), Email OTP/Verification, Profile Uploads, Activity Tracking, and Firebase Push Notifications**.

![Node.js](https://img.shields.io/badge/Node.js-v18+-green)
![Express](https://img.shields.io/badge/Express-v5.1.0-black)
![React](https://img.shields.io/badge/React-Vite-blue)
![MongoDB](https://img.shields.io/badge/MongoDB-Prisma-brightgreen)
![License](https://img.shields.io/badge/License-ISC-yellow)

---

## ğŸŒŸ Features

### âœ… User Client
- **ğŸ”‘ JWT Authentication** â€” Secure login sessions
- **ğŸ“§ Email Authentication** â€” OTP / email verification support
- **ğŸ§‘ Profile Management** â€” Update details + profile image upload
- **ğŸ¨ Dashboard Layout** â€” Sidebar + navbar + protected routes
- **ğŸ•’ Activity Tracking** â€” Fetch user activity feed (`/api/user/activity`)
- **âš™ï¸ Settings Page** â€” Theme toggle + account actions (suspend/permanent)

### âœ… Admin Client
- **ğŸ›¡ï¸ Admin Login** â€” Dedicated admin authentication
- **ğŸ“Š Admin Dashboard** â€” Stats, user management UI
- **ğŸ“¢ Broadcast Notifications UI** â€” Admin can push notifications/messages
- **ğŸ‘¥ Manage Users** â€” View users and manage status

### âœ… Key Highlights
- âœ… **Reusable Auth System** â€” Plug into any MERN project
- âœ… **Modular Backend Core** â€” Strategy-based authentication system
- âœ… **JWT + OAuth Ready** â€” Local + Google + GitHub
- âœ… **No Mock Data** â€” MongoDB/Prisma-backed API responses
- âœ… **Responsive UI** â€” Works across desktop and mobile

---

## ğŸ—ï¸ Tech Stack

### Backend
- **Runtime:** Node.js v18+
- **Framework:** Express.js
- **Database:** MongoDB + Prisma
- **Auth:** JWT + Strategy pattern (`LocalStrategy`, `OAuthStrategy`, `PasswordlessStrategy`)
- **Email:** SMTP (Gmail recommended)
- **Uploads:** Multer
- **Push:** Firebase Admin SDK (FCM)

### Frontend (Client + Admin)
- **Framework:** React (Vite)
- **Routing:** React Router DOM
- **Styling:** TailwindCSS
- **UI Components:** shadcn/ui + Radix UI
- **Icons:** lucide-react
- **HTTP:** Axios

---

## ğŸ“ Project Structure

```txt
primetrade AI/
â”‚â”€â”€ README.md
â”‚
â”‚â”€â”€ server/                          # Backend API (Node.js + Express + Prisma)
â”‚   â”œâ”€â”€ controller/                  # Controllers (auth, admin, user, push)
â”‚   â”‚   â”œâ”€â”€ adminController.js
â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”œâ”€â”€ pushController.js
â”‚   â”‚   â””â”€â”€ userController.js
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/                  # Auth & upload middleware
â”‚   â”‚   â”œâ”€â”€ authmiddleware.js
â”‚   â”‚   â””â”€â”€ upload.js
â”‚   â”‚
â”‚   â”œâ”€â”€ prisma/                      # Prisma schema
â”‚   â”‚   â””â”€â”€ schema.prisma
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                      # API route definitions
â”‚   â”‚   â”œâ”€â”€ admin.routes.js
â”‚   â”‚   â”œâ”€â”€ auth.routes.js
â”‚   â”‚   â”œâ”€â”€ user.routes.js
â”‚   â”‚   â””â”€â”€ userPushRoutes.js
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/                     # One-time scripts
â”‚   â”‚   â””â”€â”€ seedAdmin.js
â”‚   â”‚
â”‚   â”œâ”€â”€ src/core/                    # Auth core (strategy-based)
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthManager.js
â”‚   â”‚   â”‚   â””â”€â”€ strategies/
â”‚   â”‚   â”‚       â”œâ”€â”€ LocalStrategy.js
â”‚   â”‚   â”‚       â”œâ”€â”€ OAuthStrategy.js
â”‚   â”‚   â”‚       â””â”€â”€ PasswordlessStrategy.js
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ ActivityService.js
â”‚   â”‚       â”œâ”€â”€ EmailService.js
â”‚   â”‚       â””â”€â”€ UserService.js
â”‚   â”‚
â”‚   â”œâ”€â”€ templates/emails/            # Email templates (EJS)
â”‚   â”‚   â”œâ”€â”€ account-locked.ejs
â”‚   â”‚   â”œâ”€â”€ magic-link.ejs
â”‚   â”‚   â”œâ”€â”€ otp.ejs
â”‚   â”‚   â”œâ”€â”€ password-reset.ejs
â”‚   â”‚   â”œâ”€â”€ verification-email.ejs
â”‚   â”‚   â””â”€â”€ welcome.ejs
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                       # Utilities
â”‚   â”‚   â”œâ”€â”€ dbConnector.js
â”‚   â”‚   â”œâ”€â”€ seedAdmin.js
â”‚   â”‚   â”œâ”€â”€ cron/
â”‚   â”‚   â”‚   â””â”€â”€ broadcastScheduler.js
â”‚   â”‚   â””â”€â”€ push/
â”‚   â”‚       â””â”€â”€ fcm.js
â”‚   â”‚
â”‚   â”œâ”€â”€ firebase/                    # Firebase Admin SDK
â”‚   â”‚   â””â”€â”€ serviceAccountKey.json
â”‚   â”‚
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ index.js                     # Server entry point
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â””â”€â”€ README.md
â”‚
â”‚â”€â”€ USER UI/                         # User Client (Vite + React)
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ firebase-messaging-sw.js
â”‚   â”‚   â””â”€â”€ vite.svg
â”‚   â”‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProtectedRoutes.jsx
â”‚   â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚   â”‚       â””â”€â”€ DashboardLayout.jsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ authService.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ useAuth.jsx
â”‚   â”‚   â”‚   â””â”€â”€ push/
â”‚   â”‚   â”‚       â”œâ”€â”€ firebaseClient.js
â”‚   â”‚   â”‚       â””â”€â”€ registerServiceWorker.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthCallback.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LandingPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NotFound.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationsPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfilePage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RateLimitPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ReactivatePage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsPage.jsx
â”‚   â”‚   â”‚   â””â”€â”€ VerifyEmail.jsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”œâ”€â”€ App.css
â”‚   â”‚   â”œâ”€â”€ main.jsx
â”‚   â”‚   â””â”€â”€ index.css
â”‚   â”‚
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ eslint.config.js
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ postcss.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â””â”€â”€ README.md
â”‚
â”‚â”€â”€ ADMIN UI/                        # Admin Dashboard (Vite + React)
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ vite.svg
â”‚   â”‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â””â”€â”€ AdminLayout.jsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ lib/admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ adminApi.js
â”‚   â”‚   â”‚   â””â”€â”€ adminAuth.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminBroadcast.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminDashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminLogin.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminProfile.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminSettings.jsx
â”‚   â”‚   â”‚   â””â”€â”€ ManageUsers.jsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”œâ”€â”€ App.css
â”‚   â”‚   â”œâ”€â”€ main.jsx
â”‚   â”‚   â””â”€â”€ index.css
â”‚   â”‚
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ eslint.config.js
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ postcss.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â””â”€â”€ README.md
````

---

## ğŸš€ Quick Start

### âœ… Prerequisites

* Node.js **v18+**
* MongoDB (local or Atlas)
* Gmail account (for SMTP)
* Firebase project (optional, only for push notifications)

---

## 1ï¸âƒ£ Clone Repository

```bash
git clone <your-repo-url>
cd "ALL IN ONE PROJECT USE"
```

---

## 2ï¸âƒ£ Setup Backend (server/)

```bash
cd server
npm install
```

### Prisma Setup (Required)

```bash
npx prisma generate
```

(optional if using MongoDB changes)

```bash
npx prisma db push
```

### Start Backend

```bash
npm run dev
```

Backend runs on:

```
http://localhost:5000
```

---

## 3ï¸âƒ£ Setup Client (client/)

```bash
cd ../client
npm install
npm run dev
```

Client runs on:

```
http://localhost:5173
```

---

## 4ï¸âƒ£ Setup Admin Client (adminClient/)

```bash
cd ../adminClient
npm install
npm run dev
```

Admin runs on:

```
http://localhost:5174
```

---

## âœ… Port Summary

| Service      | URL                                            |
| ------------ | ---------------------------------------------- |
| Backend API  | [http://localhost:5000](http://localhost:5000) |
| Client       | [http://localhost:5173](http://localhost:5173) |
| Admin Client | [http://localhost:5174](http://localhost:5174) |

---

## ğŸ” Environment Variables

### âœ… Client Env (`client/.env`)

Create file: `client/.env`

```env
# Backend API URL
VITE_BACKEND_URL=http://localhost:5000
VITE_API_BASE_URL=http://localhost:5000

# OAuth Credentials
VITE_GOOGLE_CLIENT_ID=
VITE_GITHUB_CLIENT_ID=

# Firebase (Required only if Push Notifications enabled)
VITE_FIREBASE_API_KEY=
VITE_FIREBASE_AUTH_DOMAIN=
VITE_FIREBASE_PROJECT_ID=
VITE_FIREBASE_STORAGE_BUCKET=
VITE_FIREBASE_MESSAGING_SENDER_ID=
VITE_FIREBASE_APP_ID=
VITE_FIREBASE_VAPID_KEY=
```

---

### âœ… Server Env (`server/.env`)

Create file: `server/.env`

```env
# Server Configuration
PORT=5000
NODE_ENV=development
APP_NAME="My Reusable Auth"

# Database (Prisma + MongoDB)
DATABASE_URL=""

# Security
JWT_SECRET="generate-a-very-long-random-string-here"

# Frontend Connection
CLIENT_URL="http://localhost:5173,http://localhost:5174"
BASE_URL=http://localhost:5000
CLIENT_USER=5173

# Email Configuration (Gmail SMTP)
# IMPORTANT: EMAIL_PASS must be a Gmail 16-character App Password
EMAIL_HOST=""
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=""
EMAIL_PASS=""
EMAIL_FROM="noreply@tarun.com"

# OAuth Credentials (Google)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=

# OAuth Credentials (GitHub)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Admin Seed Credentials
ADMIN_EMAIL=
ADMIN_PASSWORD=
ADMIN_NAME=

# Firebase Admin SDK
FIREBASE_SERVICE_ACCOUNT_PATH=./firebase/serviceAccountKey.json
```

---

## ğŸ”” Firebase Push Notifications (Optional)

This project supports Push Notifications using Firebase Cloud Messaging (FCM):

* **Client:** Firebase Web Push
* **Server:** Firebase Admin SDK

Required server file:

ğŸ“Œ `server/firebase/serviceAccountKey.json`

âœ… Example format (DO NOT use real keys in this repo):

```json
{
  "type": "service_account",
  "project_id": "your-project-id",
  "private_key_id": "your-private-key-id",
  "private_key": "-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n",
  "client_email": "firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com",
  "client_id": "your-client-id",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
  "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-xxxxx%40your-project-id.iam.gserviceaccount.com",
  "universe_domain": "googleapis.com"
}
```

âš ï¸ Never commit `serviceAccountKey.json` to GitHub.

---

## ğŸ“š Useful Commands

### Prisma Commands

```bash
cd server
npx prisma generate
npx prisma db push
```

### Run All Apps Together

Open 3 terminals:

**Terminal 1**

```bash
cd server
npm run dev
```

**Terminal 2**

```bash
cd client
npm run dev
```

**Terminal 3**

```bash
cd adminClient
npm run dev
```

---

## ğŸ› Troubleshooting

### Backend not starting

* Check MongoDB is running
* Verify `server/.env` exists
* Check `DATABASE_URL` is correct
* Ensure port 5000 is not already used

### Client not connecting to backend

* Check backend is running at `http://localhost:5000`
* Verify `.env` has correct `VITE_BACKEND_URL`

### Email not sending

* Use Gmail **App Password**
* Enable 2FA in Gmail
* EMAIL_USER must be correct Gmail address

---

## ğŸ”’ Security Notes

âœ… Add `.env` in `.gitignore`:

```gitignore
.env
```

âŒ Never expose:

* JWT_SECRET
* Admin credentials
* Firebase serviceAccountKey.json

```
```
